<div *ngIf="isLoading; else contentTemplate">
  <mat-progress-spinner mode="indeterminate" color="primary" strokeWidth="2" diameter="30"></mat-progress-spinner>
</div>

<ng-template #contentTemplate>
  <div class="text-red-500" *ngIf="clusterDetails === null">Can't fetch cluster data!</div>
  <form *ngIf="clusterDetails !== null" [formGroup]="clusterConfigForm">
    <div>
      <!-- <h2 class="section__addi_title mt-6 mb-1">Additional Information</h2> -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-x-4">
        <mat-form-field appearance="outline" class="custom-mat-form-field">
          <mat-label>
            Cluster Issuer Name
            <mat-icon
              class="info-icon"
              [icIcon]="icInfo"
              matTooltip="This cluster issuer name will be used by cert-manager to generate a certificate secret. The platform will use the secret to enable TLS  for external endpoints."
              matTooltipPosition="above"
            ></mat-icon>
          </mat-label>
          <input type="text" formControlName="clusterIssuerName" matInput />
        </mat-form-field>
      </div>

      <!-- 03.01 Volume Snapshot Information -->
      <h2 class="section__title">Volume Snapshot Information</h2>
      <div class="input-group-card">
        <div class="checkbox">
          <mat-checkbox
            (change)="onAddiVolumeSnapshotChange($event.checked)"
            [(ngModel)]="enableVolumeSnapshot"
            [ngModelOptions]="{ standalone: true }"
            color="primary"
            class="rounded-checkbox"
          >
            Volume Snapshot Configuration
            <cdk-hint
              size="16px"
              hint="Kubernetes snapshot class will be used for managing snapshots of PersistentVolumes (PVs), enabling backups, restores, and data cloning;  this section is required only if the user prefers to take backups of application volumes."
            ></cdk-hint>
          </mat-checkbox>
        </div>

        <div *ngIf="enableVolumeSnapshot" class="rounded grid sm:grid-cols-2 lg:grid-cols-3 gap-x-4 mt-3">
          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Snapshot Class (Read Write Once)
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Kubernetes snapshot class for managing snapshots of PersistentVolumes (PVs) with access mode read-write once."
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="text" formControlName="snapshotClassName" matInput required />
            <mat-error *ngIf="clusterConfigForm.get('snapshotClassName').touched && clusterConfigForm.get('snapshotClassName').invalid">{{
              clusterConfigForm.get('snapshotClassName').hasError('pattern')
                ? 'Special Characters are not allowed!'
                : 'Snapshot Class (Read Write Once) is required!'
            }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Snapshot Class (Read Write Many)
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Kubernetes snapshot class for managing snapshots of PersistentVolumes (PVs) with access mode read-write many"
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="text" formControlName="snapshotClassRWMName" matInput required />
            <mat-error
              *ngIf="clusterConfigForm.get('snapshotClassRWMName').touched && clusterConfigForm.get('snapshotClassRWMName').invalid"
              >{{
                clusterConfigForm.get('snapshotClassRWMName').hasError('pattern')
                  ? 'Special Characters are not allowed!'
                  : 'Snapshot Class (Read Write Many) is required!'
              }}</mat-error
            >
          </mat-form-field>
        </div>
      </div>
      <!-- 03.02 Monitoring Information -->
      <h2 class="section__title mt-5">Monitoring Information</h2>
      <div class="border p-4 rounded">
        <!-- 03.02.01 Prometheus Server Configuration -->
        <div class="input-group-card">
          <div class="checkbox">
            <mat-checkbox
              (change)="onAddiPrometheusChange($event.checked)"
              [(ngModel)]="enablePrometheus"
              [ngModelOptions]="{ standalone: true }"
              color="primary"
              class="rounded-checkbox"
            >
              Prometheus Server Configuration
              <cdk-hint
                size="16px"
                hint="This section is required by the platform to collect application data and provide the metrics inside the application section"
              ></cdk-hint>
            </mat-checkbox>
          </div>

          <div *ngIf="enablePrometheus" class="rounded grid sm:grid-cols-2 lg:grid-cols-3 gap-x-4 mt-3">
            <mat-form-field appearance="outline" class="custom-mat-form-field">
              <mat-label>
                URL
                <mat-icon
                  class="info-icon"
                  [icIcon]="icInfo"
                  matTooltip="Provide the URL of existing Prometheus for application metrics."
                  matTooltipPosition="above"
                ></mat-icon>
              </mat-label>
              <input type="text" formControlName="prometheusUrl" matInput required placeholder="https://prometheus.xyz.com" />
              <mat-error
                *ngIf="clusterConfigForm.get('prometheusUrl').touched && clusterConfigForm.get('prometheusUrl').hasError('required')"
                >Prometheus URL is required!</mat-error
              >
              <mat-error *ngIf="clusterConfigForm.get('prometheusUrl').touched && clusterConfigForm.get('prometheusUrl').hasError('url')"
                >Please provide valid Prometheus url!</mat-error
              >
            </mat-form-field>

            <mat-form-field appearance="outline" class="custom-mat-form-field">
              <mat-label>
                Username
                <mat-icon
                  class="info-icon"
                  [icIcon]="icInfo"
                  matTooltip="Provide the username of the provided Prometheus server."
                  matTooltipPosition="above"
                ></mat-icon>
              </mat-label>
              <input type="text" formControlName="prometheusUsername" matInput autocomplete="false" />
              <mat-error
                *ngIf="
                  clusterConfigForm.get('prometheusUsername').touched && clusterConfigForm.get('prometheusUsername').hasError('required')
                "
                >Prometheus username is required!</mat-error
              >
            </mat-form-field>
            <mat-form-field appearance="outline" class="custom-mat-form-field">
              <mat-label>
                Password
                <mat-icon
                  class="info-icon"
                  [icIcon]="icInfo"
                  matTooltip="Provide the password of the provided Prometheus server."
                  matTooltipPosition="above"
                ></mat-icon>
              </mat-label>
              <input
                [type]="showPrometheusPassword ? 'text' : 'password'"
                formControlName="prometheusPassword"
                matInput
                autocomplete="false"
              />
              <button class="btn-eye" type="button" mat-icon-button matSuffix (click)="showPrometheusPassword = !showPrometheusPassword">
                <mat-icon [icIcon]="showPrometheusPassword ? icVisibilityOff : icVisibility"></mat-icon>
              </button>
              <mat-error
                *ngIf="
                  clusterConfigForm.get('prometheusPassword').touched && clusterConfigForm.get('prometheusPassword').hasError('required')
                "
                >Prometheus password is required!</mat-error
              >
            </mat-form-field>
          </div>
        </div>
        <!-- 03.02.02 Graphana Configuration -->
        <div class="input-group-card mt-4">
          <div class="checkbox">
            <mat-checkbox
              (change)="onAddiGrafanaChange($event.checked)"
              [(ngModel)]="enableGrafana"
              [ngModelOptions]="{ standalone: true }"
              color="primary"
              class="rounded-checkbox"
            >
              Grafana Configuration
              <cdk-hint size="16px" hint="This section is required by the platform to access Grafana"></cdk-hint>
            </mat-checkbox>
          </div>

          <div *ngIf="enableGrafana" class="rounded grid sm:grid-cols-2 lg:grid-cols-3 gap-x-4 mt-3">
            <mat-form-field appearance="outline" class="custom-mat-form-field">
              <mat-label>
                URL
                <mat-icon
                  class="info-icon"
                  [icIcon]="icInfo"
                  matTooltip="This section is required by the platform to access Grafana"
                  matTooltipPosition="above"
                ></mat-icon>
              </mat-label>
              <input type="text" formControlName="grafanaUrl" matInput required placeholder="https://grafana.xyz.com" />
              <mat-error *ngIf="clusterConfigForm.get('grafanaUrl').touched && clusterConfigForm.get('grafanaUrl').hasError('required')"
                >Grafana URL is required!</mat-error
              >
              <mat-error *ngIf="clusterConfigForm.get('grafanaUrl').touched && clusterConfigForm.get('grafanaUrl').hasError('url')"
                >Please provide valid Grafana URL!</mat-error
              >
            </mat-form-field>

            <mat-form-field appearance="outline" class="custom-mat-form-field">
              <mat-label>
                Username
                <mat-icon
                  class="info-icon"
                  [icIcon]="icInfo"
                  matTooltip="Provide the username of the provided Grafana"
                  matTooltipPosition="above"
                ></mat-icon>
              </mat-label>
              <input type="text" formControlName="grafanaUsername" matInput />
              <mat-error
                *ngIf="clusterConfigForm.get('grafanaUsername').touched && clusterConfigForm.get('grafanaUsername').hasError('required')"
                >Grafana username is required!</mat-error
              >
            </mat-form-field>
            <mat-form-field appearance="outline" class="custom-mat-form-field">
              <mat-label>
                Password
                <mat-icon
                  class="info-icon"
                  [icIcon]="icInfo"
                  matTooltip="Provide the password of the provided Grafana."
                  matTooltipPosition="above"
                ></mat-icon>
              </mat-label>
              <input [type]="showGrafanaPassword ? 'text' : 'password'" formControlName="grafanaPassword" matInput />
              <button class="btn-eye" type="button" mat-icon-button matSuffix (click)="showGrafanaPassword = !showGrafanaPassword">
                <mat-icon [icIcon]="showGrafanaPassword ? icVisibilityOff : icVisibility"></mat-icon>
              </button>
              <mat-error
                *ngIf="clusterConfigForm.get('grafanaPassword').touched && clusterConfigForm.get('grafanaPassword').hasError('required')"
                >Grafana password is required!</mat-error
              >
            </mat-form-field>
          </div>
        </div>
      </div>
      <!-- 03.03 Loki Information -->
      <h2 class="section__title mt-5">Log Information</h2>
      <div class="input-group-card">
        <div class="checkbox">
          <mat-checkbox
            (change)="onAddiLokiChange($event.checked)"
            [(ngModel)]="enableLoki"
            [ngModelOptions]="{ standalone: true }"
            color="primary"
            class="rounded-checkbox"
          >
            Loki Server Configuration
            <cdk-hint
              size="16px"
              hint="This section is required by the platform to collect application logs and visualize the logs inside the application section"
            ></cdk-hint>
          </mat-checkbox>
        </div>

        <div *ngIf="enableLoki" class="rounded grid sm:grid-cols-2 lg:grid-cols-3 xxl:grid-cols-4 gap-x-4 mt-3">
          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              URL
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the URL of the existing Loki for collecting application logs"
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="text" formControlName="lokiUrl" matInput placeholder="https://loki.xyz.com" />
            <mat-error *ngIf="clusterConfigForm.get('lokiUrl').touched && clusterConfigForm.get('lokiUrl').hasError('required')"
              >Loki URL is required!</mat-error
            >
            <mat-error *ngIf="clusterConfigForm.get('lokiUrl').touched && clusterConfigForm.get('lokiUrl').hasError('url')"
              >Please provide valid Loki url!</mat-error
            >
          </mat-form-field>

          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Username
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the username of the provided Loki server."
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="text" formControlName="lokiUsername" matInput autocomplete="false" />
            <mat-error *ngIf="clusterConfigForm.get('lokiUsername').touched && clusterConfigForm.get('lokiUsername').hasError('required')">
              Loki username is required
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Password
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the password of the provided Loki server."
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input [type]="showLokiPassword ? 'text' : 'password'" formControlName="lokiPassword" matInput autocomplete="false" />
            <button class="btn-eye" type="button" mat-icon-button matSuffix (click)="showLokiPassword = !showLokiPassword">
              <mat-icon [icIcon]="showLokiPassword ? icVisibilityOff : icVisibility"></mat-icon>
            </button>
            <mat-error *ngIf="clusterConfigForm.get('lokiPassword').touched && clusterConfigForm.get('lokiPassword').hasError('required')"
              >Prometheus password is required!</mat-error
            >
          </mat-form-field>
          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Tenant ID
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the tenant ID if the Loki server is multitenant"
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="number" formControlName="lokiOrgId" min="0" matInput autocomplete="false" />
            <mat-error *ngIf="clusterConfigForm.get('lokiOrgId').touched && clusterConfigForm.get('lokiOrgId').hasError('required')"
              >Loki Tenant ID is required</mat-error
            >
          </mat-form-field>
        </div>
      </div>
      <!-- 03.04 ArgoCD Configuration -->
      <h2 class="section__title mt-5">ArgoCD Information</h2>
      <div class="input-group-card">
        <div class="checkbox">
          <mat-checkbox
            (change)="onAddiArgoChange($event.checked)"
            [(ngModel)]="enableArgo"
            [ngModelOptions]="{ standalone: true }"
            color="primary"
            class="rounded-checkbox"
          >
            ArgoCD Configuration
            <cdk-hint
              size="16px"
              hint="This section is required by the platform for enabling the ‘Helm Apps’ feature; The platform uses argocd to deploy and manage helm-based applications in the cluster."
            ></cdk-hint>
          </mat-checkbox>
        </div>

        <div *ngIf="enableArgo" class="rounded grid sm:grid-cols-2 lg:grid-cols-3 xxl:grid-cols-4 gap-x-4 mt-3">
          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              URL
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the URL of the ArgoCD."
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="text" formControlName="argocdURL" matInput placeholder="https://argocd.xyz.com" />
            <mat-error *ngIf="clusterConfigForm.get('argocdURL').touched && clusterConfigForm.get('argocdURL').hasError('required')"
              >ArgoCD URL is required!</mat-error
            >
            <mat-error *ngIf="clusterConfigForm.get('argocdURL').touched && clusterConfigForm.get('argocdURL').hasError('url')"
              >Please provide valid ArgoCD url!</mat-error
            >
          </mat-form-field>

          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Port
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the port of the provided ArgoCD."
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="number" formControlName="argocdPort" matInput min="0" placeholder="80" />
            <mat-error *ngIf="clusterConfigForm.get('argocdPort').touched && clusterConfigForm.get('argocdPort').hasError('required')"
              >ArgoCD port is required!</mat-error
            >
            <mat-error *ngIf="clusterConfigForm.get('argocdPort').touched && clusterConfigForm.get('argocdPort').hasError('port')"
              >Please provide valid ArgoCD port!</mat-error
            >
          </mat-form-field>
          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Username
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the username of the provided ArgoCD."
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input type="text" formControlName="argocdUsername" matInput autocomplete="false" />
            <mat-error
              *ngIf="clusterConfigForm.get('argocdUsername').touched && clusterConfigForm.get('argocdUsername').hasError('required')"
            >
              ArgoCD username is required
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="custom-mat-form-field">
            <mat-label>
              Password
              <mat-icon
                class="info-icon"
                [icIcon]="icInfo"
                matTooltip="Provide the password of the provided ArgoCD."
                matTooltipPosition="above"
              ></mat-icon>
            </mat-label>
            <input [type]="showArgoPassword ? 'text' : 'password'" formControlName="argocdPassword" matInput autocomplete="false" />
            <button class="btn-eye" type="button" mat-icon-button matSuffix (click)="showArgoPassword = !showArgoPassword">
              <mat-icon [icIcon]="showArgoPassword ? icVisibilityOff : icVisibility"></mat-icon>
            </button>
            <mat-error
              *ngIf="clusterConfigForm.get('argocdPassword').touched && clusterConfigForm.get('argocdPassword').hasError('required')"
              >ArgoCD password is required!</mat-error
            >
          </mat-form-field>
        </div>
      </div>
      <!-- 03.05 Service Mesh Configuration -->
      <h2 class="section__title mt-5">
        Service Mesh Information
        <cdk-hint
          size="16px"
          hint="This section is required by the platform to manage and utilize the service mesh features for the application."
        ></cdk-hint>
      </h2>
      <div class="input-group-card p-4">
        <div class="checkbox">
          <mat-checkbox
            (change)="onAddiServiceMeshChange($event.checked)"
            formControlName="serviceMeshEnabled"
            color="primary"
            class="rounded-checkbox"
          >
            Enable Service Mesh
            <cdk-hint size="16px" hint="If selected, you need to provide the service mesh configurations."></cdk-hint>
          </mat-checkbox>
        </div>
        <ng-container *ngIf="clusterConfigForm.get('serviceMeshEnabled').value === true">
          <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-x-4 mt-3">
            <mat-form-field appearance="outline" class="custom-mat-form-field">
              <mat-label>Implementation Tool Type</mat-label>
              <mat-select [(ngModel)]="serviceMeshToolType" [ngModelOptions]="{ standalone: true }">
                <mat-option value="ISTIO">ISTIO</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <h3 class="section__sub_title mb-1">
            Istio Configuration
            <cdk-hint
              size="16px"
              hint="Ingress configuration for accessing required platform services; The platform will create Kubernetes Ingress and the domain will be configured by adding a subdomain along with the service wildcard domain."
            ></cdk-hint>
          </h3>
          <div class="border p-4 rounded mt-2">
            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-x-4">
              <mat-form-field appearance="outline" class="custom-mat-form-field">
                <mat-label>
                  Gateway Domain Name (Wildcard Supported)
                  <mat-icon
                    class="info-icon"
                    [icIcon]="icInfo"
                    matTooltip="This wildcard domain will be used to access the user applications utilizing the Istio gateway."
                    matTooltipPosition="above"
                  ></mat-icon>
                </mat-label>
                <input type="text" formControlName="serviceMeshGatewayWildcardDomain" matInput placeholder="mesh.xyz.com" />
                <mat-error
                  *ngIf="
                    clusterConfigForm.get('serviceMeshGatewayWildcardDomain').touched &&
                    clusterConfigForm.get('serviceMeshGatewayWildcardDomain').hasError('required')
                  "
                  >Service Mesh Gateway wildcard domain is required!</mat-error
                >
              </mat-form-field>
              <mat-form-field appearance="outline" class="custom-mat-form-field">
                <mat-label>
                  Gateway Name
                  <mat-icon
                    class="info-icon"
                    [icIcon]="icInfo"
                    matTooltip="Provide the default Istio gateway name of the existing Istio system that will be used in the virtual services for accessing the applications externally."
                    matTooltipPosition="above"
                  ></mat-icon>
                </mat-label>
                <input type="text" formControlName="istioGatewayName" matInput required />
                <mat-error
                  *ngIf="
                    clusterConfigForm.get('istioGatewayName').touched && clusterConfigForm.get('istioGatewayName').hasError('required')
                  "
                  >Gateway Name is required!</mat-error
                >
              </mat-form-field>
            </div>
            <div class="checkbox">
              <mat-checkbox
                (change)="onServiceMeshSslChange($event.checked)"
                [(ngModel)]="serviceMeshSslEnabled"
                [ngModelOptions]="{ standalone: true }"
                color="primary"
                class="rounded-checkbox"
              >
                Enable SSL
                <cdk-hint
                  size="16px"
                  hint="By enabling SSL, you can provide an existing Kubernetes secret containing cert, key, and CA (if any) for the Istio gateway domain"
                ></cdk-hint>
              </mat-checkbox>
            </div>
            <div class="grid sm:grid-cols-3 gap-x-4 mt-2" *ngIf="serviceMeshSslEnabled">
              <mat-form-field appearance="outline" class="custom-mat-form-field sm:col-span-2">
                <mat-label>
                  Secret Name
                  <mat-icon
                    class="info-icon"
                    [icIcon]="icInfo"
                    matTooltip="Provide the name of Kubernetes secret containing cert, key, and CA"
                    matTooltipPosition="above"
                  ></mat-icon>
                </mat-label>
                <textarea formControlName="serviceMeshGatewayWildcardDomainTls" matInput rows="4"></textarea>
              </mat-form-field>
            </div>
          </div>

          <h3 class="section__sub_title mb-1 mt-6">
            Kiali Information
            <cdk-hint
              size="16px"
              hint=" This section is required by the platform to access Kiali (An observability tool for Istio service meshes. It provides a web-based UI that visualizes the service mesh's structure, showing how services are connected and interact)."
            ></cdk-hint>
          </h3>
          <div class="border px-4 py-2 rounded">
            <div class="checkbox">
              <mat-checkbox
                (change)="onAddiKialiChange($event.checked)"
                [(ngModel)]="enableKiali"
                [ngModelOptions]="{ standalone: true }"
                color="primary"
                class="rounded-checkbox"
              >
                Kiali Configuration
              </mat-checkbox>
            </div>
            <div *ngIf="enableKiali" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-x-4 mt-3">
              <mat-form-field appearance="outline" class="custom-mat-form-field">
                <mat-label>
                  URL
                  <mat-icon
                    class="info-icon"
                    [icIcon]="icInfo"
                    matTooltip="Provide the name of Kubernetes secret containing cert, key, and CA"
                    matTooltipPosition="above"
                  ></mat-icon>
                </mat-label>
                <input type="text" formControlName="kialiURL" matInput placeholder="https://kiali.xyz.com" required />
                <mat-error *ngIf="clusterConfigForm.get('kialiURL').touched && clusterConfigForm.get('kialiURL').hasError('required')"
                  >Kiali Url is required!</mat-error
                >
                <mat-error *ngIf="clusterConfigForm.get('kialiURL').touched && clusterConfigForm.get('kialiURL').hasError('url')"
                  >Please provide valid Kiali url!</mat-error
                >
              </mat-form-field>

              <mat-form-field appearance="outline" class="custom-mat-form-field">
                <mat-label>
                  Token
                  <mat-icon
                    class="info-icon"
                    [icIcon]="icInfo"
                    matTooltip="Provide the token of the existing Kiali."
                    matTooltipPosition="above"
                  ></mat-icon>
                </mat-label>
                <input [type]="showKialiToken ? 'text' : 'password'" formControlName="kialiToken" matInput autocomplete="false" />
                <button class="btn-eye" type="button" mat-icon-button matSuffix (click)="showKialiToken = !showKialiToken">
                  <mat-icon [icIcon]="showKialiToken ? icVisibilityOff : icVisibility"></mat-icon>
                </button>
                <mat-error *ngIf="clusterConfigForm.get('kialiToken').touched && clusterConfigForm.get('kialiToken').hasError('required')"
                  >Kiali token is required!</mat-error
                >
              </mat-form-field>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <!-- <div class="mt-6">
      <h4 class="mb-2">Lighhouse Configuration</h4>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4">
        <mat-form-field appearance="outline" class="custom-mat-form-field">
          <mat-label>Lighhouse Domain</mat-label>
          <input type="text" matInput formControlName="lighthouseDomain" placeholder="https://lighthouse.example.io" />
          <mat-error *ngIf="clusterConfigForm.get('lighthouseDomain').touched && clusterConfigForm.get('lighthouseDomain').hasError('url')"
            >Lighhouse domain is not valid.</mat-error
          >
        </mat-form-field>
        <mat-form-field appearance="outline" class="custom-mat-form-field">
          <mat-label>Lighhouse log url</mat-label>
          <input
            type="text"
            matInput
            formControlName="lighthouseLogUrl"
            placeholder="https://lighthouse.example.io/logs"
          />
        </mat-form-field>
        <mat-form-field appearance="outline" class="custom-mat-form-field">
          <mat-label>Lighhouse websocket url</mat-label>
          <input type="text" matInput formControlName="lighthouseWsUrl" placeholder="wss://lighthouse.example.io/ws" />
          <mat-error *ngIf="clusterConfigForm.get('lighthouseWsUrl').touched && clusterConfigForm.get('lighthouseWsUrl').hasError('url')"
            >Lighhouse ws url is not valid.</mat-error
          >
        </mat-form-field>
      </div>
    </div> -->

    <div class="mt-6 flex items-center justify-end gap-3">
      <button class="btn btn-default" mat-button type="button" (click)="closeFormEvent.emit()">Close</button>
      <button
        [disabled]="clusterConfigForm.invalid || !clusterConfigForm.dirty"
        class="btn btn-primary w-24"
        [class.pointer-events-none]="isSubmitting"
        mat-raised-button
        color="primary"
        (click)="onUpdate()"
        type="button"
      >
        <span *ngIf="!isSubmitting">Save</span>
        <div *ngIf="isSubmitting" class="flex items-center justify-center align-middle">
          <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
        </div>
      </button>
    </div>
  </form>
</ng-template>
